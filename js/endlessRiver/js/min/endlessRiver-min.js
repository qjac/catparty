jQuery.fn.endlessRiver=function(e){return e=jQuery.extend({speed:100,pause:!0,buttons:!0},e),this.each(function(){function i(e,t){s.animate({left:"-="+e},t,"linear",function(){s.children("li:first").appendTo(s),s.css("left",0),r=s.children("li:first").outerWidth(!0),l=t/e*r,i(r,l)})}function t(){s.hover(function(){n(this).stop()},function(){var e=s.offset().left,t=e+s.children("li:first").outerWidth(!0)-a,n=l/r*t;i(t,n)})}var n=jQuery,s=n(this);s.css({margin:"0 !important",padding:"0 !important"});var r,l,a=s.offset().left,c=1;s.children("li.tick-clones").remove(),s.addClass("newsticker");for(var o=s.wrap("<div class='mask'></div>"),d=s.parent().wrap("<div class='tickercontainer'></div>"),u=s.children("li"),f=function(){c=1,s.append(u.clone(!0).addClass("tick-clones")),s.children("li").each(function(e){c+=n(this,e).outerWidth(!0)})};c<d.outerWidth(!0);)f();if(s.width(c),s.height(s.parent().height()),r=s.children("li:first").outerWidth(!0),l=r/e.speed*1e3,i(r,l),e.pause&&t(),e.buttons){var h=n('<ul class="er-controls"><li class="pause" class="btn btn-danger">pause</li><li class="play" class="btn btn-danger">play</li></ul>');h.insert(d),h.children(".pause").click(function(){s.unbind("mouseenter mouseleave"),s.stop()}),h.children(".play").click(function(){t();var e=s.offset().left,n=e+s.children("li:first").outerWidth(!0)-a,c=l/r*n;i(n,c)})}})};